<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>zensols.dataset.elsearch documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Generate, split into folds or train/test and cache a dataset</span> <span class="project-version">0.0.12</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zensols</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dataset</span></div></div></li><li class="depth-3 branch"><a href="zensols.dataset.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-3 branch current"><a href="zensols.dataset.elsearch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>elsearch</span></div></a></li><li class="depth-3 branch"><a href="zensols.dataset.thaw.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>thaw</span></div></a></li><li class="depth-3"><a href="zensols.dataset.version.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>version</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-aggregation"><div class="inner"><span>aggregation</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-buckets"><div class="inner"><span>buckets</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-create-context"><div class="inner"><span>create-context</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-create-index"><div class="inner"><span>create-index</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-delete-document"><div class="inner"><span>delete-document</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-delete-index"><div class="inner"><span>delete-index</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-delete-mapping"><div class="inner"><span>delete-mapping</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-describe"><div class="inner"><span>describe</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-document-by-id"><div class="inner"><span>document-by-id</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-document-count"><div class="inner"><span>document-count</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-document-ids"><div class="inner"><span>document-ids</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-documents"><div class="inner"><span>documents</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-exists.3F"><div class="inner"><span>exists?</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-put-document"><div class="inner"><span>put-document</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-recreate-index"><div class="inner"><span>recreate-index</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-search"><div class="inner"><span>search</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-search-literal"><div class="inner"><span>search-literal</span></div></a></li><li class="depth-1"><a href="zensols.dataset.elsearch.html#var-with-context"><div class="inner"><span>with-context</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">zensols.dataset.elsearch</h1><div class="doc"><div class="markdown"><p>A <em>client simple</em> wrapper for an Elasticsearch wrapper. You probably want use the more client friendly <a href="zensols.dataset.db.html">zensols.dataset.db</a>.</p></div></div><div class="public anchor" id="var-aggregation"><h3>aggregation</h3><div class="usage"><code>(aggregation agg-query)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L163">view source</a></div></div><div class="public anchor" id="var-buckets"><h3>buckets</h3><div class="usage"><code>(buckets by-field)</code></div><div class="doc"><div class="markdown"><p>Do an aggregation search and bucket <strong>by-field</strong>.</p>
<p>Return maps with keys:</p>
<ul>
  <li><strong>:name</strong> value of name given by <strong>by-field</strong></li>
  <li><strong>:count</strong> the count of the bucket</li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L198">view source</a></div></div><div class="public anchor" id="var-create-context"><h3>create-context</h3><div class="usage"><code>(create-context index-name mapping-type &amp; {:keys [url mapping-type-defs settings], :or {url "http://localhost:9200", mapping-type-defs {:properties {mapping-type {}}}}})</code></div><div class="doc"><div class="markdown"><p>Create a new context to be used with <a href="zensols.dataset.elsearch.html#var-with-context">with-context</a>.</p>
<h2><a href="#parameters" name="parameters"></a>Parameters</h2>
<ul>
  <li><strong>index-name</strong> the name of the Elasticsearch index</li>
  <li><strong>mapping-type</strong> map type name (see ES docs)</li>
</ul>
<h2><a href="#keys" name="keys"></a>Keys</h2>
<ul>
  <li><strong>:url</strong> the URL to the DB (defaults to <code>http://localhost:9200</code>)</li>
  <li><strong>:mapping-type-defs</strong> metadata (see ES docs)</li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L18">view source</a></div></div><div class="public anchor" id="var-create-index"><h3>create-index</h3><div class="usage"><code>(create-index)</code></div><div class="doc"><div class="markdown"><p>Create a new Elasticsearch index.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L66">view source</a></div></div><div class="public anchor" id="var-delete-document"><h3>delete-document</h3><div class="usage"><code>(delete-document id)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L123">view source</a></div></div><div class="public anchor" id="var-delete-index"><h3>delete-index</h3><div class="usage"><code>(delete-index)</code></div><div class="doc"><div class="markdown"><p>Delete an Elasticsearch index.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L83">view source</a></div></div><div class="public anchor" id="var-delete-mapping"><h3>delete-mapping</h3><div class="usage"><code>(delete-mapping)</code></div><div class="doc"><div class="markdown"><p>Delete an Elasticsearch mapping.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L75">view source</a></div></div><div class="public anchor" id="var-describe"><h3>describe</h3><div class="usage"><code>(describe)</code></div><div class="doc"><div class="markdown"><p>Get the mapping (provide info) about the index.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L97">view source</a></div></div><div class="public anchor" id="var-document-by-id"><h3>document-by-id</h3><div class="usage"><code>(document-by-id id)</code></div><div class="doc"><div class="markdown"><p>Return a document by its ID.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L134">view source</a></div></div><div class="public anchor" id="var-document-count"><h3>document-count</h3><div class="usage"><code>(document-count)</code></div><div class="doc"><div class="markdown"><p>Return the total number of documents in the DB.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L172">view source</a></div></div><div class="public anchor" id="var-document-ids"><h3>document-ids</h3><div class="usage"><code>(document-ids)</code><code>(document-ids query)</code></div><div class="doc"><div class="markdown"><p>Return document IDs only. The query default to <code>match_all</code>.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L184">view source</a></div></div><div class="public anchor" id="var-documents"><h3>documents</h3><div class="usage"><code>(documents)</code></div><div class="doc"><div class="markdown"><p>Return all documents as a lazy sequence.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L193">view source</a></div></div><div class="public anchor" id="var-exists.3F"><h3>exists?</h3><div class="usage"><code>(exists?)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L130">view source</a></div></div><div class="public anchor" id="var-put-document"><h3>put-document</h3><div class="usage"><code>(put-document doc)</code><code>(put-document id doc)</code></div><div class="doc"><div class="markdown"><p>Add a document to Elasticsearch.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L109">view source</a></div></div><div class="public anchor" id="var-recreate-index"><h3>recreate-index</h3><div class="usage"><code>(recreate-index)</code></div><div class="doc"><div class="markdown"><p>Delete an then create Elasticsearch index.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L90">view source</a></div></div><div class="public anchor" id="var-search"><h3>search</h3><div class="usage"><code>(search query)</code></div><div class="doc"><div class="markdown"><p>Return a lazy sequence of documents. Scanning is the underlying elastic search method here.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L151">view source</a></div></div><div class="public anchor" id="var-search-literal"><h3>search-literal</h3><div class="usage"><code>(search-literal query)</code></div><div class="doc"><div class="markdown"><p>Return a lazy sequence of documents. Scanning is the underlying elastic search method here.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L142">view source</a></div></div><div class="public anchor" id="var-with-context"><h3>with-context</h3><h4 class="type">macro</h4><div class="usage"><code>(with-context exprs &amp; forms)</code></div><div class="doc"><div class="markdown"><p>Execute a body with the form (with-context [context <keys>] …)</keys></p>
<ul>
  <li><strong>context</strong> is created with <a href="zensols.dataset.elsearch.html#var-create-context">create-context</a></li>
  <li><strong>keys…</strong> option keys to override what was giving in <a href="zensols.dataset.elsearch.html#var-create-context">create-context</a></li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/elsearch.clj#L45">view source</a></div></div></div></body></html>