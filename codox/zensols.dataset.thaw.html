<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>zensols.dataset.thaw documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Generate, split into folds or train/test and cache a dataset</span> <span class="project-version">0.0.12</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zensols</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dataset</span></div></div></li><li class="depth-3 branch"><a href="zensols.dataset.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-3 branch"><a href="zensols.dataset.elsearch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>elsearch</span></div></a></li><li class="depth-3 branch current"><a href="zensols.dataset.thaw.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>thaw</span></div></a></li><li class="depth-3"><a href="zensols.dataset.version.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>version</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="zensols.dataset.thaw.html#var-default-connection-inst"><div class="inner"><span>default-connection-inst</span></div></a></li><li class="depth-1"><a href="zensols.dataset.thaw.html#var-ids"><div class="inner"><span>ids</span></div></a></li><li class="depth-1"><a href="zensols.dataset.thaw.html#var-instance-by-id"><div class="inner"><span>instance-by-id</span></div></a></li><li class="depth-1"><a href="zensols.dataset.thaw.html#var-instances"><div class="inner"><span>instances</span></div></a></li><li class="depth-1"><a href="zensols.dataset.thaw.html#var-instances-count"><div class="inner"><span>instances-count</span></div></a></li><li class="depth-1"><a href="zensols.dataset.thaw.html#var-set-default-connection"><div class="inner"><span>set-default-connection</span></div></a></li><li class="depth-1"><a href="zensols.dataset.thaw.html#var-thaw-connection"><div class="inner"><span>thaw-connection</span></div></a></li><li class="depth-1"><a href="zensols.dataset.thaw.html#var-with-connection"><div class="inner"><span>with-connection</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">zensols.dataset.thaw</h1><div class="doc"><div class="markdown"><p>Exactly like <a href="zensols.dataset.db.html">zensols.dataset.db</a> but use the file system.</p>
<p>Instead of using ElasticSearch, use a rows of a JSON file created with <a href="zensols.dataset.db.html#var-freeze-dataset">zensols.dataset.db/freeze-dataset</a>. The file can be created by any program since it’s just a text file with the following keys:</p>
<ul>
  <li><strong>:instance</strong>: the (i.e. parsed) data instance (see <a href="zensols.dataset.db.html">zensols.dataset.db</a>)</li>
  <li><strong>:class-label</strong>: label of the class for the data instance</li>
  <li><strong>:id</strong>: the string unique ID of the instance</li>
  <li><strong>:set-type</strong>: either <code>train</code> or <code>test</code> depending on the set type.</li>
</ul></div></div><div class="public anchor" id="var-default-connection-inst"><h3>default-connection-inst</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/thaw.clj#L19">view source</a></div></div><div class="public anchor" id="var-ids"><h3>ids</h3><div class="usage"><code>(ids &amp; {:keys [set-type], :or {set-type :train-test}})</code></div><div class="doc"><div class="markdown"><p>Return all IDs based on the <em>dataset split</em> (see class docs).</p>
<h2><a href="#keys" name="keys"></a>Keys</h2>
<ul>
  <li><strong>:set-type</strong> is either <code>:train</code>, <code>:test</code>, <code>:train-test</code> (all) and defaults to <a href="zensols.dataset.db.html#var-set-default-set-type">set-default-set-type</a> or <code>:train</code> if not set</li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/thaw.clj#L90">view source</a></div></div><div class="public anchor" id="var-instance-by-id"><h3>instance-by-id</h3><div class="usage"><code>(instance-by-id conn id)</code><code>(instance-by-id id)</code></div><div class="doc"><div class="markdown"><p>Get a specific instance by its ID.</p>
<p>This returns a map that has the following keys:</p>
<ul>
  <li><strong>:instance</strong> the instance data, which was set with <strong>:create-instances-fn</strong> in <a href="zensols.dataset.db.html#var-elasticsearch-connection">elasticsearch-connection</a></li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/thaw.clj#L107">view source</a></div></div><div class="public anchor" id="var-instances"><h3>instances</h3><div class="usage"><code>(instances &amp; {:keys [set-type id-set], :or {set-type :train-test}})</code></div><div class="doc"><div class="markdown"><p>Return all instance data based on the <em>dataset split</em> (see class docs).</p>
<p>See <a href="zensols.dataset.thaw.html#var-instance-by-id">instance-by-id</a> for the data in each map sequence returned.</p>
<h2><a href="#keys" name="keys"></a>Keys</h2>
<ul>
  <li><strong>:set-type</strong> is either <code>:train</code>, <code>:test</code>, <code>:train-test</code> (all) and defaults to <a href="zensols.dataset.db.html#var-set-default-set-type">set-default-set-type</a> or <code>:train</code> if not set</li>
  <li><strong>:include-ids?</strong> if non-<code>nil</code> return keys in the map as well</li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/thaw.clj#L121">view source</a></div></div><div class="public anchor" id="var-instances-count"><h3>instances-count</h3><div class="usage"><code>(instances-count)</code></div><div class="doc"><div class="markdown"><p>Return the number of datasets in the DB.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/thaw.clj#L84">view source</a></div></div><div class="public anchor" id="var-set-default-connection"><h3>set-default-connection</h3><div class="usage"><code>(set-default-connection)</code><code>(set-default-connection conn)</code></div><div class="doc"><div class="markdown"><p>Set the default connection.</p>
<p>Parameter <strong>conn</strong> is used in place of what is set with <a href="zensols.dataset.thaw.html#var-with-connection">with-connection</a>. This is very convenient and saves typing, but will get clobbered if a <a href="zensols.dataset.thaw.html#var-with-connection">with-connection</a> is used further down in the stack frame.</p>
<p>If the parameter is missing, it’s unset.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/thaw.clj#L46">view source</a></div></div><div class="public anchor" id="var-thaw-connection"><h3>thaw-connection</h3><div class="usage"><code>(thaw-connection name resource &amp; {:keys [set-type-key], :or {set-type-key :set-type}})</code></div><div class="doc"><div class="markdown"><p>Create a connection with <strong>name</strong> analogous to <a href="zensols.dataset.db.html#var-elasticsearch-connection">zensols.dataset.db/elasticsearch-connection</a> but read from <strong>resource</strong> (any type usable by <code>clojure.java.io/reader</code> as the backing store. The results are cached in memory.</p></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/thaw.clj#L59">view source</a></div></div><div class="public anchor" id="var-with-connection"><h3>with-connection</h3><h4 class="type">macro</h4><div class="usage"><code>(with-connection connection &amp; body)</code></div><div class="doc"><div class="markdown"><p>Execute a body with the form (with-connection connection …)</p>
<ul>
  <li><strong>connection</strong> is created with <a href="zensols.dataset.db.html#var-elasticsearch-connection">elasticsearch-connection</a></li>
</ul></div></div><div class="src-link"><a href="https://github.com/plandes/clj-ml-dataset/blob/v0.0.12/src/clojure/zensols/dataset/thaw.clj#L21">view source</a></div></div></div></body></html>